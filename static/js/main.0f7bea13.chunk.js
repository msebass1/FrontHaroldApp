(this.webpackJsonpharold_app=this.webpackJsonpharold_app||[]).push([[2],{87:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var a=n(6),c=n(1),o=n.n(c),r=n(12),i=n.n(r),s=(n(87),n(22)),l=n(153),u=n(154),d=n(96),j=n(141),h=n(144),b=n(146),m=n(148),O=n(147),p=Object(j.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function g(){var e=p();return Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(h.a,{position:"static",children:Object(a.jsx)(b.a,{children:Object(a.jsx)(O.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",children:Object(a.jsx)(m.a,{variant:"h6",className:e.title,children:"Harold App"})})})})})}var x=n(27),f=n(25),v=n(100),C=n(150),N=n(159),w=n(151),y=n(156),S=n(160),k=n(97),A=n(103),R=n(102),I=n(158),q=n(20);n.e(0).then(n.bind(null,161)),n.e(1).then(n.bind(null,162));var P=Object(j.a)((function(e){return{root:{width:"100%"},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)},resetContainer:{padding:e.spacing(3)},formControl:{margin:e.spacing(1),minWidth:120}}}));function B(e){var t=e.usuario,n=P(),r=o.a.useState(0),i=Object(s.a)(r,2),l=i[0],u=i[1],j=o.a.useState({type:"",document:"",usuario:t}),h=Object(s.a)(j,2),b=h[0],O=h[1],p=["Seleccione su tipo de contrato","Seleccione el documento que necesita"],g=function(){u((function(e){return e+1}))},B=function(){u((function(e){return e-1}))},E=function(e){O((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(x.a)({},e.target.name,e.target.value))}))},D=q.a.firestore(),T=(q.a.storage(),Object(c.useState)(-1)),F=Object(s.a)(T,2),L=(F[0],F[1]);function U(e){switch(e){case 0:return Object(a.jsxs)(k.a,{className:n.formControl,children:[Object(a.jsx)(A.a,{children:"Tipo"}),Object(a.jsxs)(R.a,{name:"type",value:b.type,onChange:E,children:[Object(a.jsx)(I.a,{value:"GM",children:"GM"}),Object(a.jsx)(I.a,{value:"Contratista",children:"Contratista"})]}),Object(a.jsx)(v.a,{children:"Tipo de contrato"})]});case 1:return Object(a.jsxs)(k.a,{className:n.formControl,children:[Object(a.jsx)(A.a,{children:"Documento "}),Object(a.jsxs)(R.a,{name:"document",value:b.document,onChange:E,children:[Object(a.jsx)(I.a,{value:"ALTURA",children:"Permiso de trabajo en alturas"}),Object(a.jsx)(I.a,{value:"CONFINADOS",children:"Permiso ingreso espacios confinados"}),Object(a.jsx)(I.a,{value:"ENERGIA",children:"Permiso control energ\xedas peligrosas"})]}),Object(a.jsx)(v.a,{children:"Tipo de permiso"})]});default:return"\xbfest\xe1 usted intentando romper algo?"}}return Object(a.jsxs)("div",{className:n.root,children:[Object(a.jsx)(C.a,{onClick:function(){q.a.auth().signOut().then((function(){console.log("signout succesfull"),window.location.replace("")})).catch((function(e){console.error(e)}))},className:n.button,children:"Cerrar sesi\xf3n"}),Object(a.jsx)(N.a,{activeStep:l,orientation:"vertical",children:p.map((function(e,t){return Object(a.jsxs)(w.a,{children:[Object(a.jsx)(y.a,{children:e}),Object(a.jsxs)(S.a,{children:[U(t),Object(a.jsx)("div",{className:n.actionsContainer,children:Object(a.jsxs)("div",{children:[Object(a.jsx)(C.a,{disabled:0===l,onClick:B,className:n.button,children:"Back"}),Object(a.jsx)(C.a,{variant:"contained",color:"primary",onClick:g,className:n.button,disabled:""===b.type&&0===l||""===b.document&&1===l,children:l===p.length-1?"Finish":"Next"})]})})]})]},e)}))}),l===p.length&&Object(a.jsxs)(d.a,{square:!0,elevation:0,className:n.resetContainer,children:[Object(a.jsxs)(m.a,{children:["Usted Necesita un Permiso de ",b.document," como empleado ",b.type]}),Object(a.jsx)(C.a,{onClick:function(){u(0)},className:n.button,children:"Reset"}),Object(a.jsx)(C.a,{variant:"contained",color:"primary",onClick:function(){D.collection("documents").add(b).then((function(e){console.log("Document written with ID: ",e.id),D.collection("users").get().then((function(e){L(e.docs.length)}));var t="https://back-harold-app.herokuapp.com/".concat(b.document,"-").concat(b.type,"/").concat(b.usuario.email);window.location.replace(t)})).catch((function(e){console.error("Error adding document: ",e)}))},children:"Confirmar"})]})]})}var E=n(152),D=n(157),T=n(155);n.e(0).then(n.bind(null,161)),n.e(1).then(n.bind(null,162));var F=Object(j.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},button:{margin:e.spacing(3)}}}));function L(e){return Object(a.jsx)(T.a,Object(f.a)({elevation:6,variant:"filled"},e))}function U(e){var t=e.setShowRegister,n=F(),c=o.a.useState({}),r=Object(s.a)(c,2),i=r[0],l=r[1],u=o.a.useState(""),d=Object(s.a)(u,2),j=d[0],h=d[1],b=function(e){l((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(x.a)({},e.target.name,e.target.value))}))};return Object(a.jsxs)("div",{children:[Object(a.jsx)(m.a,{variant:"h5",gutterBottom:!0,children:"Registrarse"}),Object(a.jsxs)(k.a,{className:[n.formControl,n.button].join(" "),children:[Object(a.jsx)(E.a,{required:!0,name:"firstName",type:"text",onChange:b}),Object(a.jsx)(v.a,{children:"Nombre"}),Object(a.jsx)(E.a,{required:!0,name:"lastName",type:"text",onChange:b}),Object(a.jsx)(v.a,{children:"Apellido"}),Object(a.jsx)(E.a,{required:!0,name:"contrato",type:"text",onChange:b}),Object(a.jsx)(v.a,{children:"contrato"}),Object(a.jsx)(E.a,{required:!0,name:"email",type:"text",onChange:b}),Object(a.jsx)(v.a,{children:"email"}),Object(a.jsx)(E.a,{required:!0,type:"password",name:"password",onChange:b}),Object(a.jsx)(v.a,{children:"password"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)(C.a,{onClick:function(){return function(e){var t=e.firstName,n=e.lastName,a=e.contrato,c=e.email,o=e.password;console.log(e),q.a.auth().createUserWithEmailAndPassword(c,o).then((function(){q.a.firestore().collection("users").doc(q.a.auth().currentUser.uid).set({firstName:t,lastName:n,contrato:a,admin:"false",email:c}).then((function(e){console.log(e),window.location.replace("")})).catch((function(e){h(e.message),console.log("Error creando el usuario Firestore",e)}))})).catch((function(e){h(e.message),console.log(j),console.log("Error creando el usuario Auth",e)}))}(i)},variant:"contained",className:n.button,color:"secondary",children:"Confirmar Registro"}),Object(a.jsx)(C.a,{onClick:function(){return t(!1)},variant:"contained",className:n.button,color:"primary",children:" Logearse"}),Object(a.jsx)(D.a,{open:""===!j,autoHideDuration:6e3,children:Object(a.jsx)(L,{onClose:function(){h("")},severity:"warning",children:"revisa los datos ingresados o comunicate con el administrador"})})]})]})}n.e(0).then(n.bind(null,161)),n.e(1).then(n.bind(null,162));var W=Object(j.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120}}}));function G(e){var t=e.setShowRegister,n=W(),c=o.a.useState({}),r=Object(s.a)(c,2),i=r[0],l=r[1],u=function(e){l((function(t){return Object(f.a)(Object(f.a)({},t),{},Object(x.a)({},e.target.name,e.target.value))}))};return Object(a.jsxs)("div",{children:[Object(a.jsx)(m.a,{variant:"h5",gutterBottom:!0,children:"Loguearse"}),Object(a.jsxs)(k.a,{className:n.formControl,children:[Object(a.jsx)(E.a,{required:!0,name:"email",onChange:u}),Object(a.jsx)(v.a,{children:"email"}),Object(a.jsx)(E.a,{required:!0,name:"password",onChange:u}),Object(a.jsx)(v.a,{children:"password"})]}),Object(a.jsx)("br",{}),Object(a.jsx)(C.a,{onClick:function(){return function(e){var t=e.email,n=e.password;q.a.auth().signInWithEmailAndPassword(t,n).then((function(){window.location.replace("")})).catch((function(e){console.error(e)}))}(i)},variant:"contained",color:"secondary",children:" iniciar Sesi\xf3n "}),Object(a.jsx)("br",{}),Object(a.jsx)("br",{}),Object(a.jsx)(C.a,{onClick:function(){return t(!0)},variant:"contained",color:"primary",children:" registrarse "})]})}n.e(0).then(n.bind(null,161)),n.e(1).then(n.bind(null,162));var z=Object(j.a)({app:{background:" #5a657e",height:1080},cont:{marginTop:50},form:{padding:50,width:800}});var J=function(){var e=z(),t=o.a.useState({}),n=Object(s.a)(t,2),c=n[0],r=n[1],i=o.a.useState(!1),j=Object(s.a)(i,2),h=j[0],b=j[1];return o.a.useEffect((function(){q.a.auth().onAuthStateChanged((function(e){try{q.a.firestore().collection("users").doc(q.a.auth().currentUser.uid).get().then((function(e){e.exists?(r(e.data()),console.log("Document data:",e.data())):console.log("No such document!")}))}catch(t){console.log("no Loged")}}))}),[]),Object(a.jsxs)("div",{className:e.app,children:[Object(a.jsx)(l.a,{}),Object(a.jsx)("header",{children:Object(a.jsx)(g,{})}),Object(a.jsx)("div",{children:Object(a.jsx)(u.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:e.cont,children:Object(a.jsx)(u.a,{item:!0,children:Object(a.jsx)(d.a,{className:e.form,children:void 0!==c.firstName?Object(a.jsx)(B,{usuario:c}):h?Object(a.jsx)(U,{setShowRegister:b}):Object(a.jsx)(G,{setShowRegister:b})})})})})]})},H=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,163)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),o(e),r(e)}))};n(68).a.initializeApp({apiKey:"AIzaSyCsPG0nNNwtzpo06VgdUPW7YneeJqzz5WQ",authDomain:"haroldapp-49993.firebaseapp.com",databaseURL:"https://haroldapp-49993.firebaseio.com",projectId:"haroldapp-49993",storageBucket:"haroldapp-49993.appspot.com",messagingSenderId:"432466827161",appId:"1:432466827161:web:41233f367828b077dea508"}),i.a.render(Object(a.jsx)(J,{}),document.getElementById("root")),H()}},[[95,3,4]]]);
//# sourceMappingURL=main.0f7bea13.chunk.js.map